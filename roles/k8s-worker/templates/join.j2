apiVersion: kubeadm.k8s.io/v1beta3
kind: JoinConfiguration
discovery:
  bootstrapToken:
    apiServerEndpoint: {{ config.control_plane_endpoint }}:{{ config.apiserver_port }}
    token: {{ token }}
    caCertHashes:
      - sha256:{{ hash }}
nodeRegistration:
  criSocket: "unix:///run/containerd/containerd.sock" 
  kubeletExtraArgs: 
    node-labels: node.{{ config.label_domain }}/lifetime=ephemeral
    # anonymous-auth: "false"  # generate account  requires setting up an account before-hand?
    tls-min-version: VersionTLS13