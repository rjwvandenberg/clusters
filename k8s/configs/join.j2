apiVersion: kubeadm.k8s.io/v1beta3
kind: JoinConfiguration
discovery:
  bootstrapToken:
    apiServerEndpoint: {{ kubernetes.control_plane_endpoint }}:{{ kubernetes.apiserver_port }}
    token: {{ token }}
    caCertHashes:
      - sha256:{{ hash }}
nodeRegistration:
  criSocket: "unix:///run/containerd/containerd.sock" 
  kubeletExtraArgs: 
    node-labels: node.{{ kubernetes.domain }}/lifetime=ephemeral